
            }, 30000);
            
            document.addEventListener('click', () => {
                if (currentSession) currentSession.updateActivity();
            });
        }

        function secureLogout(reason = 'ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬') {
            if (currentSession) {
                currentSession.destroy();
                currentSession = null;
            }
            
            sessionStorage.removeItem('secureSession');
            localStorage.removeItem('secureSession');
            
            showNotification(`ğŸ”’ ${reason}`);
            backToAuth();
        }

        // ==================== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠÙ† ÙˆØ§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª ====================
        function showEvaluationInterface() {
            document.getElementById('authSection').classList.add('hidden');
            document.getElementById('evaluationSection').classList.remove('hidden');
            
            loadSupervisorsFromCloud();
                }
            } else {
                showNotification('âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹');
            }
            });
        }

        function selectSupervisorFromDropdown() {
            const dropdown = document.getElementById('supervisorSelect');
            const selectedOption = dropdown.options[dropdown.selectedIndex];
            
            if (!selectedOption.value) {
                selectedSupervisor = null;
                document.getElementById('supervisorDetails').innerHTML = '';
                return;
            }
            
            try {
                selectedSupervisor = JSON.parse(selectedOption.dataset.supervisor);
                displaySupervisorDetails();
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù„ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ù„:', error);
            }
        }

        function displaySupervisorDetails() {
            const container = document.getElementById('supervisorDetails');
            const department = selectedSupervisor.department || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
            const location = selectedSupervisor.location || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
            const locationDetails = selectedSupervisor.locationDetails || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
            const code = selectedSupervisor.code || '---';
            
            let departmentIcon = 'ğŸ›¡ï¸';
            let departmentText = department;
            
            if (department.includes('Ø§Ù„Ø£Ù…Ù†') || department.includes('Ø§Ù…Ù†')) {
                departmentIcon = 'ğŸ›¡ï¸';
                departmentText = 'ğŸ›¡ï¸ Ø§Ù„Ø£Ù…Ù†';
            } else if (department.includes('Ø§Ù„Ù†Ø¸Ø§ÙØ©') || department.includes('Ù†Ø¸Ø§ÙØ©')) {
                departmentIcon = 'ğŸ§¹';
                departmentText = 'ğŸ§¹ Ø§Ù„Ù†Ø¸Ø§ÙØ©';
            } else if (department.includes('Ø§Ù„ØµÙŠØ§Ù†Ø©') || department.includes('ØµÙŠØ§Ù†Ø©')) {
                departmentIcon = 'ğŸ”§';
                departmentText = 'ğŸ”§ Ø§Ù„ØµÙŠØ§Ù†Ø©';
            }

            container.innerHTML = `
                <div class="supervisor-option selected">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                        <div style="font-size: 32px; color: #2c5530;">ğŸ‘¤</div>
                        <div style="flex: 1;">
                            <div style="font-weight: bold; font-size: 1.2rem; color: #2c5530; margin-bottom: 15px;">
                                Ù…Ø³Ø¤ÙˆÙ„
                            </div>
                            
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin: 8px 0;">
                                <div style="color: #666; margin: 10px 0; display: flex; align-items: center; gap: 10px;">
                                    ${departmentIcon} <strong>Ø§Ù„Ù…Ù‡Ù…Ø©:</strong> ${departmentText}
                                </div>
                                
                                <div style="color: #777; margin: 10px 0; display: flex; align-items: center; gap: 10px;">
                                    ğŸ“ <strong>Ø§Ù„Ù…ÙˆÙ‚Ø¹:</strong> ${location}
                                </div>
                                
                                <div style="color: #777; margin: 10px 0; display: flex; align-items: center; gap: 10px;">
                                    ğŸ¢ <strong>Ø¬Ù‡Ø© Ø§Ù„Ù†Ø´Ø§Ø·:</strong> ${locationDetails}
                                </div>
                                
                                <div style="color: #777; margin: 10px 0; display: flex; align-items: center; gap: 10px;">
                                    ğŸ†” <strong>Ø§Ù„Ø±Ù…Ø²:</strong> ${code}
                                </div>
                            </div>
                            
                            <div style="text-align: center; margin-top: 10px; padding: 8px; background: #e8f5e8; border-radius: 6px;">
                                <span style="color: #2ecc71; font-weight: bold;">âœ… Ù†Ø´Ø·</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        async function loadAdminResponses() {
            try {
                if (!supabase) return;

                const { data, error } = await supabase
                    .from('app_data')
                    .select('*')
                    .eq('id', 1)
                    .single();

                if (error) throw error;

                const generalResponses = data.data.generalResponses || [];
                const adminResponses = generalResponses.filter(response => 
                    response.adminResponse === true || 
                    response.type === 'admin_response' ||
                    response.sender === 'Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©'
                );
                
                displayAdminResponses(adminResponses);
                
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø±Ø¯ÙˆØ¯ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:', error);
            }
        }nses.forEach(response => {
                adminResponsesHTML += ubmitEvrror) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
                try {
</body>
</html>
